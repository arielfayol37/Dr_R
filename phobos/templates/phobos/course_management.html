<!-- phobos: course_management.html-->
{% extends 'phobos/layout.html' %}
{% block title %} Course {% endblock %}
{% block body%}
    <div class="sidebar" style="display:none">
        <header class="sidebar-header">X</header>
        <ul>
            <li><a href="{% url 'phobos:index' %}">Home</a></li>
            {% if not is_question_bank %}
                <li><a href="{% url 'phobos:create_assignment' course_id=course.id %}">Create Assignment</a></li>
                <li><a href="{% url 'phobos:manage_course_info' course_id=course.id %}">Course Info</a></li> 
                <li><a href="{% url 'phobos:gradebook' course_id=course.id %}">Gradebook</a></li>
                <li><a href="{% url 'phobos:manage_enrollment_codes' course_id=course.id %}">Enrollment Codes</a></li>
            {% endif %}
            <li><a href="{% url 'phobos:search_question' %}">Search</a></li>
            
        </ul>
    </div>

    
<nav class="navbar-custom">
    <a class="nav-link home-btn" href="{% url 'phobos:index' %}">Home </a>
    <a class="nav-link view-notes-btn" href="{% url 'phobos:create_assignment' course_id=course.id %}">Create Assignment</a>
    <a class="nav-link gradebook-btn" href="{% url 'phobos:gradebook' course_id=course.id %}">GradeBook</a>
</nav>

<div id="sf-container">
    <input id="search-field" type="text" name="search" class="page-search" data-name="assignment-name" placeholder="search assignment" />
</div>
    <br/>
    
    <h4>{{course.name}}</h4><hr/>
    <!-- Display course's assignments -->
    <ul class="courses course-list">
        {% for assignment in assignments %}
            {% include 'phobos/assignment_display.html' with assignment=assignment course=course %}
        {% endfor %}
    </ul>
    

    <script>
        const navigation = document.querySelector('.navbar-custom');
        const homeDiv = document.querySelector('.home');
        const gradebookDiv = document.querySelector('.gradebook')
    
        function initial_view() {
            homeDiv.style.display = 'none';
            gradebookDiv.style.display= 'none';
        }
    
        navigation.addEventListener('click', () => {
            const target = event.target;
            if (target.classList.contains('home-btn')) {
                initial_view();
                homeDiv.style.display = 'block';
            }
            else if(target.classList.contains('gradebook-btn')){
                initial_view();
                gradebookDiv.style.display= 'block';
            }
        })
    
        const gradebookBtn = document.querySelector('.gradebook-btn')
        const show_gradebookEvent = new Event('click',{
            bubbles: true,
            cancelable: true,
        });
        if(gradebookBtn.dataset.show_gradebook === "1"){
            gradebookBtn.dispatchEvent(show_gradebookEvent)
        }
    
    </script>
{% endblock %}
{% block scripts %}
    <script src="{% static 'phobos/js/search_generic.js' %}"></script>
{% endblock %}
