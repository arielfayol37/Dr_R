{% extends 'phobos/layout.html' %}
{% load static %}
{% block title %} Gradebook {% endblock %}
{% block style %} <link rel="stylesheet" href="{% static 'phobos/css/gradebook.css' %}"/> {% endblock %}

<div id="gradebook-page-container">
    {% block body %}
    <div class="sidebar" style="display:none">
        <header class="sidebar-header">X</header>
        <ul>
            <li><a href="{% url 'phobos:index' %}">Home</a></li>
            <li><a href="{% url 'phobos:course_management' course_id=course.id %}">Assignments</a></li>
        </ul>
    </div>
    <h1> GradeBook</h1>
    <br/>
    <div id= "search-bar">
                <form action="{% url 'phobos:student_search' course_id=course.id %}" method="get">
                    <input id="search" type="text" name="q" placeholder="Looking for a student? search here">
                </form>
    </div>
    <br/>
    <button id="export-button" class="btn btn-info">Export as Excel</button>
    <br/>
    <br/>
    <table class="table table-striped table-bordered table-hover">
        <thead>
            <tr>
                <td><b>Email</b></td>
                <td><b>First Name</b></td>
                <td><b>Last Name</b></td>
                {% for assignment in assignments %}
                <td> <b>{{assignment.name}}</b> </td>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for student, grade_list in students_grades %}
            <tr>
                <td>{{ student.email }}</td>
                <td><a href="{% url 'phobos:student_profile' course_id=course.id  student_id=student.id %} ">{{ student.first_name}} </a></td>
                <td><a href="{% url 'phobos:student_profile' course_id=course.id  student_id=student.id %} ">{{ student.last_name}} </a></td>
                {% for grade in grade_list %}
                    <td> {{grade}} </td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
        
    {% endblock %}

</div>


{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script src="{% static 'phobos/js/gradebook_export.js' %}"></script>
{% endblock %}