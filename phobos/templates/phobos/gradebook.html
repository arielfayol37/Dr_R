{% extends 'phobos/layout.html' %}
{% load static %}
{% block title %} Gradebook {% endblock %}
{% block style %} <link rel="stylesheet" href="{% static 'phobos/css/gradebook.css' %}"/> {% endblock %}

<div id="gradebook-page-container">
    {% block body %}
    <div class="sidebar" style="display:none">
        <header class="sidebar-header">X</header>
        <ul>
            <li><a href="{% url 'phobos:index' %}">Home</a></li>
            <li><a href="{% url 'phobos:course_management' course_id=course.id %}">Assignments</a></li>
        </ul>
    </div>
    <h1> GradeBook</h1>
    <br/>
    <div id= "search-bar">
                <form action="{% url 'phobos:student_search' course_id=course.id %}" method="get">
                    <input id="search" type="text" name="q" placeholder="Looking for a student? search here">
                </form>
    </div>
    <br/>
    <button id="export-button" class="btn btn-info">Export as Excel</button>

<!-- extra functionalities-->    
    <button class="select-button" class="btn btn-primary" style="position: relative; float: right">Select Students</button>
<br/>
<br/>

<div class="extra-functions">

    <button class="action-button" class="btn btn-primary" style="display: none;">Bulk Action</button>

    <select class="selected-action" style="display:none"> 
        <option value="action-1">Extend Due Date</option>
        <!-- Add actions here. use option tag-->
    </select>
    <br/>
    <br/>

<!-- Due Date functionalities-->
<div  class="due-date-div" style="display: none" >     
    <select class="selected-assignments">
        {% for assignment in assignments %}
        <option  value="{{assignment.id}}">{{assignment.name}} </option>
        {% endfor %}
    </select>
    <input type="datetime-local"  class="input-new-due-date-field">
    <input type="button" class="save-new-due-date-field" value="OK">
</div>

<!-- Add elements associated with an action here-->

</div> <!-- END OF extra-functionalities-->
    <br/>
    
        <table class="table table-striped table-bordered table-hover">
        <thead>
            <tr>
                <td><div class="td-checkbox"  style="display: none;"><input class="select-all-students" type="checkbox" /></div></td>
               <td><b>Email</b></td>
                <td><b>First Name</b></td>
                <td><b>Last Name</b></td>
                {% for assignment in assignments %}
                <td> <b>{{assignment.name}}</b> </td>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for student, grade_list in students_grades %}
            <tr>
                <td ><div class="td-checkbox" style="display: none;"><input class="selected-students" type="checkbox" value="{{student.id}}"/></div></td>
                <td>{{ student.email }}</td>
                <td><a href="{% url 'phobos:student_profile' course_id=course.id  student_id=student.id %} ">{{ student.first_name}} </a></td>
                <td><a href="{% url 'phobos:student_profile' course_id=course.id  student_id=student.id %} ">{{ student.last_name}} </a></td>
                {% for grade in grade_list %}
                    <td> {{grade}} </td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endblock %}

</div>


{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script src="{% static 'phobos/js/gradebook_export.js' %}"></script>
<script src="{% static 'phobos/js/gradebook_actions.js' %}"></script>

{% endblock %}