<!-- deimos: answer_question.html -->
{% extends 'deimos/layout.html' %}
{% load static %}
{% block title%} Answer Question {% endblock %}
{% block style%} <link rel="stylesheet" href="{% static 'deimos/css/question_nav.css' %}"/> 
<math xmlns="http://www.w3.org/1998/Math/MathML"></math>{% endblock %}
{% block body %}
    <h3>Question {{question.number}}</h3>
    <div class="page-container" id="answer-question">
    <br/>
    
    <form method="post" enctype="multipart/form-data" id="question-form">
      {% csrf_token %}
      <input type="hidden" value="{{question.id}}" name="question-id"/>
      <p class="question-content">{{question.text | safe}}</p>
      <br/>
       {% if is_mcq%}
            <div class="inputed-mcq-answers">
              {% for answer, is_latex, question_type in answers_is_latex_question_type %}
                <div class="mcq-option-answer">
                  <div class="formatted-answer">
                    {% if is_latex %}
                        <input type="hidden" class="latex-answer-question-view" value="{{answer.content}}">
                    {% else %}   
                        {{answer.content}}
                    {% endif %}
                    <input type="hidden" value="{{answer.pk}}" name="mcq_answer_id_{{ forloop.counter0 }}"/>
                    <input type="hidden" value="0{{question_type}}" class="answer_info" name="mcq_answer_info_{{ forloop.counter0 }}"/>
                  </div>
                  <button type="button" class="btn btn-warning mcq-false exempt">False</button> 
                </div>
                <br/> <br/>   
              {% endfor %}
            </div> 
            <input type="submit" class="btn btn-success exempt" value="Submit Answer">
            <br/> <br/>
        {% else %}

            <input type="hidden" value="{{answer.pk}}" name="structural_answer_id_0"/>
            {% for q_type in question_type %} <!--expecting to iterate only over one item-->
              <input type="hidden" value="{{q_type}}" name="structural_answer_info_0"/>
            {% endfor %}
            <input type="submit" class="btn btn-success exempt" value="Submit Answer">
            <div class="formatted-answer"></div>
            {% include 'deimos/calci.html' %}
            <br/>
      {% endif %}

    
    <br/>
    </form>

    <div class="navigation">
      <ul>
        {% for question_id, question_num in question_ids_nums %}
          {% if question_id == question.id %}
            <li class="list active">
          {% else %}
            <li class="list">
          {% endif %}
                <a href="{% url 'deimos:answer_question' question_id=question_id assignment_id=assignment_id course_id=course_id %}">
                    <span class="icon">{{question_num}}</span>    
                </a>
            </li>
        {% endfor %}  
  
          <div class="indicator"></div>
      </ul>
   </div>  

  </div>
  
  </div>

  <div id="questions-navigator">


{% endblock %}
{% block scripts%}

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/9.5.0/math.min.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="{% static 'deimos/js/question.js' %}"></script>
<script src="{% static 'deimos/js/answer_input.js' %}"></script>
{% if not is_mcq%}
  <script src="{% static 'deimos/js/calci.js' %}"></script>
{% endif %}
<script src="{% static 'deimos/js/question_nav.js' %}"></script>


{% endblock %}
