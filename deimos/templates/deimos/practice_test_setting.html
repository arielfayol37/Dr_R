<!-- deimos: assignment_management.html-->
{% extends 'deimos/layout.html' %}
{% block title %} Notes {% endblock %}
{% load static %}
{% block body%}
<div class="sidebar" style="display:none">
    <header class="sidebar-header">X</header>
    <ul>
        <li><a href="{% url 'deimos:index' %}">Home</a></li>
        <li><a href="{% url 'deimos:course_management' course_id=course.id %}">Assignments</a></li>
        <li><a href="{% url 'deimos:search_question' %}">Search Question</a></li>
    </ul>
</div>
    <div class="sf-container">
        <input  class="search-field page-search" type="text" name="search_question" placeholder="search question"/>
    </div>

<nav class="navbar navbar-expand-lg navbar-light bg-light" >
    <div class="container-fluid">
      <ul class="navbar-nav mr-auto" style="list-style: none; display:flex;">
        <li class="nav-item " style="display:inline;">
          <a class="nav-link home-btn" href="{% url 'deimos:course_management' course_id=course.id%}">Home </a>
        </li>
        <li class="nav-item" style="display:inline;">
          <a class="nav-link view-notes-btn" href="{% url 'deimos:note_management' course_id=course.id%}">View notes</a>
        </li>
        <li class="nav-item" style="display:inline;">
            <a class="nav-link grabebook-btn" href="{% url 'deimos:gradebook' course_id=course.id %}">GradeBook</a>
        </li>
        </div>
  </nav>
    <br/>
    <br/>
    <h4 class="suggestion" style="font-size: large;">{{course.name}} - Practice test</h4><hr/>
    
  
  <form action="{% url 'deimos:generate_practice_test' practice_course_id=practice_course_id %}" method="post">
    {% csrf_token %}
    <input type="hidden" value="{{course.id}}" name="course_id"><br>
    <p style="color: red;">{{error_message}} </p>
    - Topic:
<br>
  <select id="selectTopic" name="topic_name" aria-placeholder="Select a Topic">
    {% for topic in topics %}
    <option value="{{topic.name}}">{{topic}} </option>
    {% endfor %}
  </select><br>
<br>
- Subtopic:
<br>
  {% for topic,Subtopics in topicSubtopics %}
  <select data-topic="{{topic.name}}" class = "select_subtopic_class"name="subtopic_{{topic.name}}" aria-placeholder="Select a SubTopic">
    <option value="All"> All</option>
    {% for subtopic in Subtopics %}
    <option value="{{subtopic.name}}">{{subtopic}} </option>
    {% endfor %}
  </select>
  {% endfor %}

  <br>
  - number of Question:
  <br><input name="num_Question" type="number" placeholder="Enter the number of questions" style="width: 70%;">
<br>
- Test title:
<br>
  <input name="practice_test_name" type="text" placeholder="Enter the name of the practice test e.g Practice Mechanics 2" style="width: 70%;"><br><br>
  <input type="submit" value="Generate Practice test">
</form>


{% endblock %}
{% block scripts%}
<script>
  const SelectedSubtopic = document.querySelectorAll(".select_subtopic_class");
  const SelectedTopic = document.querySelector('#selectTopic');

  //initial view
  SelectedSubtopic.forEach(subtopic => {
      subtopic.style.display='none';
    });
  var selectedsubtopic = SelectedSubtopic[0];
  selectedsubtopic.style.display="block";

//display subtopics
  SelectedTopic.addEventListener("change",()=>{
    selectedsubtopic.style.display="none";  // hide previous 
    for(i=0;i<SelectedSubtopic.length;i++){
      if(SelectedSubtopic[i].dataset.topic== SelectedTopic.value){
        selectedsubtopic = SelectedSubtopic[i];
        selectedsubtopic.style.display="block"; // display new
        break;
      }
    }
  })
</script>

<script src="{% static 'deimos/js/search_question.js' %}"></script>
{% endblock %}
