<!-- deimos: course_management.html-->
{% extends 'deimos/layout.html' %}
{% load my_custom_tags %}
{% block title %} Course {% endblock %}
{% block body%}
<style>
    .nav-link:hover {
    cursor: pointer;
  }
</style>
<div class="sidebar" style="display:none">
    <header class="sidebar-header">X</header>
    <ul>
        <li><a href="{% url 'deimos:index' %}">Home</a></li>
        <li><a href="{% url 'astros:course_info' course_id=course.id %}">Course Info</a></li>
        <li><a href="{% url 'deimos:search_question' %}">Search Question</a></li>
        <li><a href="{% url 'deimos:practice_test_settings' course_id=course.id %}">Practice Test</a></li>
    </ul>
</div>

<nav class="navbar-custom">
    <a class="nav-link home-btn" href="{% url 'deimos:index' %}">Home </a>
    <a class="nav-link" href="{% url 'deimos:course_management' course_id=course.id%}">Assignments</a>
    <a class="nav-link view-notes-btn" href="{% url 'deimos:note_management' course_id=course.id%}">View notes</a>
    <a class="nav-link gradebook-btn" data-show_gradebook="{{show_gradebook}}" style="color:white">GradeBook</a>
  </nav>

  <div class="home">
    <div id="sf-container">
        <input id="search-field" type="text" name="search" placeholder="search assignment" />
    </div>
    <br />
    <h4>{{course.name}}</h4>
    <hr />

    <!-- Display course's assignments -->
    <ul class="courses course-list">
        {% for assignment in assignments %}
        {% include 'deimos/assignment_display.html' with assignment=assignment course=course %}
        {% endfor %}
    </ul>
</div>

<div class="gradebook" style="display: none;">
    {% include 'deimos/gradebook.html' with student=student assignment_student_grade=assignment_student_grade course_score=course_score %}
</div>

<script>
    const navigation = document.querySelector('.navbar-custom');
    const homeDiv = document.querySelector('.home');
    const gradebookDiv = document.querySelector('.gradebook')

    function initial_view() {
        homeDiv.style.display = 'none';
        gradebookDiv.style.display= 'none';
    }

    navigation.addEventListener('click', () => {
        target = event.target;
        if (target.classList.contains('home-btn')) {
            initial_view();
            homeDiv.style.display = 'block';
        }
        else if(target.classList.contains('gradebook-btn')){
            initial_view();
            gradebookDiv.style.display= 'block';
        }
    })

    const gradebookBtn = document.querySelector('.gradebook-btn')
    const show_gradebookEvent = new Event('click',{
        bubbles: true,
        cancelable: true,
    });
    if(gradebookBtn.dataset.show_gradebook === "1"){
        gradebookBtn.dispatchEvent(show_gradebookEvent)
    }

</script>
{% endblock %}

